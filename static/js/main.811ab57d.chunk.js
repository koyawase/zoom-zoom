(this["webpackJsonpzoom-zoom"]=this["webpackJsonpzoom-zoom"]||[]).push([[0],{38:function(t,e,n){},60:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var o=n(1),c=n.n(o),i=n(30),a=n.n(i),r=(n(38),n(20)),s=n.n(r),u=n(31),l=n(8),j=n(7),d=n(5),b=function(t){var e=t.iconUrl,n=t.position;return Object(d.jsx)(j.c,{latitude:Number(n.latitude),longitude:Number(n.longitude),children:Object(d.jsx)("img",{height:"50",src:e,alt:"vehicle map marker"})})},h=function(t){var e=t.data;return Object(d.jsx)(j.d,{id:"home-zones",type:"geojson",data:e,children:Object(d.jsx)(j.b,{id:"home-zones-layer",type:"line",source:"home-zones",paint:{"line-color":"#f7590d","line-width":3}})})},p=n.p+"static/media/loading-spinner.9dd8c81d.gif",m=(n(60),function(){return Object(d.jsxs)("div",{className:"loading-spinner",children:[Object(d.jsx)("img",{src:p,alt:"loading"}),Object(d.jsx)("h1",{children:"Loading"})]})}),O=n(11),f=function(t){var e=t.lat,n=t.long,c=t.zoom,i=t.vehicleData,a=t.homeZones,r=Object(o.useState)({height:"100vh",width:"100wh",latitude:e,longitude:n,zoom:c}),s=Object(l.a)(r,2),u=s[0],p=s[1],m=Object(o.useState)({}),f=Object(l.a)(m,2),g=f[0],v=f[1],y=Object(o.useState)(!1),w=Object(l.a)(y,2),k=w[0],z=w[1];return Object(d.jsxs)(j.e,Object(O.a)(Object(O.a)({},u),{},{width:"100vw",height:"100vh",mapboxApiAccessToken:"pk.eyJ1Ijoia295YXdhc2UiLCJhIjoiY2trdDRnZDFvMGRkcDMxbXkwbnlwbnp2dyJ9.R4AJYt9GJHhWjQXPvFDW8g",onViewportChange:function(t){return p(t)},mapStyle:"mapbox://styles/mapbox/basic-v9",children:[i.map((function(t,e){return Object(d.jsx)(b,Object(O.a)({},t),"custom-marker-".concat(e))})),Object(d.jsx)(h,Object(O.a)({},a)),Object(d.jsx)(j.a,{style:{right:10,top:10},positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showAccuracyCircle:!1,onGeolocate:function(t){return v({lat:t.coords.latitude,long:t.coords.longitude})},auto:!0}),k?Object(d.jsx)(x,{userLocation:g,vehicleData:i}):null,Object(d.jsx)("button",{className:"find-mevo-button",onClick:function(){return z(!k)},children:k?"Cancel Find":"Find Nearest Mevo"})]}))};f.defaultProps={lat:-41.2924,long:174.778,zoom:15};var g=f,v=n(33),x=function(t){var e=t.vehicleData,n=t.userLocation,c=Object(o.useState)({}),i=Object(l.a)(c,2),a=i[0],r=i[1];return Object(o.useEffect)((function(){!function(){var t=Number.MAX_SAFE_INTEGER,o={};e.map((function(e){var c=[n.lat,n.long],i=[e.position.latitude,e.position.longitude],a=Object(v.distance)(c,i);a<t&&(o={long:e.position.longitude,lat:e.position.latitude},t=a)})),fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(n.long,",").concat(n.lat,";").concat(o.long,",").concat(o.lat,"?geometries=geojson&access_token=").concat("pk.eyJ1Ijoia295YXdhc2UiLCJhIjoiY2trdDRnZDFvMGRkcDMxbXkwbnlwbnp2dyJ9.R4AJYt9GJHhWjQXPvFDW8g")).then((function(t){return t.json()})).then((function(t){return r(t.routes[0].geometry)}))}()}),[]),Object(d.jsx)("div",{className:"mevo-route",children:0===Object.keys(a).length?null:Object(d.jsx)(j.d,{id:"route",type:"geojson",data:a,children:Object(d.jsx)(j.b,{id:"route-layer",type:"line",source:"route",paint:{"line-color":"#00afdd","line-width":3}})})})},y=(n(61),n(14));n.n(y).a.workerClass=n(62).default;var w=function(){var t=Object(o.useState)([]),e=Object(l.a)(t,2),n=e[0],c=e[1],i=Object(o.useState)([]),a=Object(l.a)(i,2),r=a[0],j=a[1],b=Object(o.useState)(!0),h=Object(l.a)(b,2),p=h[0],O=h[1];function f(){return(f=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([fetch("https://api.mevo.co.nz/public/vehicles/all"),fetch("https://api.mevo.co.nz/public/home-zones/all")]).then((function(t){t[0].json().then((function(t){return c(t)})),t[1].json().then((function(t){return j(t)}))})).catch((function(t){throw t}));case 2:O(!1);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),Object(d.jsx)("div",{className:"App",children:p?Object(d.jsx)(m,{}):Object(d.jsx)(g,{vehicleData:n,homeZones:r})})},k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(e){var n=e.getCLS,o=e.getFID,c=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),o(t),c(t),i(t),a(t)}))};a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root")),k()}},[[63,1,2]]]);
//# sourceMappingURL=main.811ab57d.chunk.js.map